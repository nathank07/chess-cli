/*! For license information please see landing.js.LICENSE.txt */
(()=>{"use strict";var t,e,r,n,o={600:(t,e,r)=>{r.d(e,{qQ:()=>N});const n="w",o="b",i="p",a="b",s="r",c="q",u="k",l="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",h=-1,f={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},d={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},p={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},v={b:[16,32,17,15],w:[-16,-32,-17,-15]},m={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},g=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],y=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],b={p:1,n:2,b:4,r:8,q:16,k:32},w=["n",a,s,c],_={[u]:d.KSIDE_CASTLE,[c]:d.QSIDE_CASTLE},S={w:[{square:p.a1,flag:d.QSIDE_CASTLE},{square:p.h1,flag:d.KSIDE_CASTLE}],b:[{square:p.a8,flag:d.QSIDE_CASTLE},{square:p.h8,flag:d.KSIDE_CASTLE}]},k={b:1,w:6},E=["1-0","0-1","1/2-1/2","*"];function L(t){return t>>4}function C(t){return 15&t}function x(t){return-1!=="0123456789".indexOf(t)}function A(t){const e=C(t),r=L(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function P(t){return t===n?o:n}function q(t,e,r,n,o,a=void 0,s=d.NORMAL){const c=L(n);if(o!==i||7!==c&&0!==c)t.push({color:e,from:r,to:n,piece:o,captured:a,flags:s});else for(let i=0;i<w.length;i++){const c=w[i];t.push({color:e,from:r,to:n,piece:o,captured:a,promotion:c,flags:s|d.PROMOTION})}}function M(t){let e=t.charAt(0);if(e>="a"&&e<="h"){if(t.match(/[a-h]\d.*[a-h]\d/))return;return i}return e=e.toLowerCase(),"o"===e?u:e}function T(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class N{_board=new Array(128);_turn=n;_header={};_kings={w:h,b:h};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};constructor(t=l){this.load(t)}clear(t=!1){this._board=new Array(128),this._kings={w:h,b:h},this._turn=n,this._castling={w:0,b:0},this._epSquare=h,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._updateSetup(this.fen())}removeHeader(t){t in this._header&&delete this._header[t]}load(t,e=!1){let r=t.split(/\s+/);if(r.length>=2&&r.length<6){const e=["-","-","0","1"];t=r.concat(e.slice(-(6-r.length))).join(" ")}r=t.split(/\s+/);const{ok:i,error:a}=function(t){const e=t.split(/\s+/);if(6!==e.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(e[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(8!==o.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let t=0;t<o.length;t++){let e=0,r=!1;for(let n=0;n<o[t].length;n++)if(x(o[t][n])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};e+=parseInt(o[t][n],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[t][n]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};e+=1,r=!1}if(8!==e)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==e[3][1]&&"w"==e[1]||"6"==e[3][1]&&"b"==e[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:t,regex:r}of i){if(!r.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${t} king`};if((e[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${t} kings`}}return{ok:!0}}(t);if(!i)throw new Error(a);const s=r[0];let c=0;this.clear(e);for(let t=0;t<s.length;t++){const e=s.charAt(t);if("/"===e)c+=8;else if(x(e))c+=parseInt(e,10);else{const t=e<"a"?n:o;this.put({type:e.toLowerCase(),color:t},A(c)),c++}}this._turn=r[1],r[2].indexOf("K")>-1&&(this._castling.w|=d.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(this._castling.w|=d.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(this._castling.b|=d.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(this._castling.b|=d.QSIDE_CASTLE),this._epSquare="-"===r[3]?h:p[r[3]],this._halfMoves=parseInt(r[4],10),this._moveNumber=parseInt(r[5],10),this._updateSetup(this.fen())}fen(){let t=0,e="";for(let r=p.a8;r<=p.h1;r++){if(this._board[r]){t>0&&(e+=t,t=0);const{color:o,type:i}=this._board[r];e+=o===n?i.toUpperCase():i.toLowerCase()}else t++;r+1&136&&(t>0&&(e+=t),r!==p.h1&&(e+="/"),t=0,r+=8)}let r="";this._castling[n]&d.KSIDE_CASTLE&&(r+="K"),this._castling[n]&d.QSIDE_CASTLE&&(r+="Q"),this._castling[o]&d.KSIDE_CASTLE&&(r+="k"),this._castling[o]&d.QSIDE_CASTLE&&(r+="q"),r=r||"-";let a="-";if(this._epSquare!==h){const t=this._epSquare+(this._turn===n?16:-16),e=[t+1,t-1];for(const t of e){if(136&t)continue;const e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type===i){this._makeMove({color:e,from:t,to:this._epSquare,piece:i,captured:i,flags:d.EP_CAPTURE});const r=!this._isKingAttacked(e);if(this._undoMove(),r){a=A(this._epSquare);break}}}}return[e,this._turn,r,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(t){this._history.length>0||(t!==l?(this._header.SetUp="1",this._header.FEN=t):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(l)}get(t){return this._board[p[t]]||!1}put({type:t,color:e},r){if(-1==="pnbrqkPNBRQK".indexOf(t.toLowerCase()))return!1;if(!(r in p))return!1;const n=p[r];return(t!=u||this._kings[e]==h||this._kings[e]==n)&&(this._board[n]={type:t,color:e},t===u&&(this._kings[e]=n),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(t){const e=this.get(t);return delete this._board[p[t]],e&&e.type===u&&(this._kings[e.color]=h),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),e}_updateCastlingRights(){const t=this._board[p.e1]?.type===u&&this._board[p.e1]?.color===n,e=this._board[p.e8]?.type===u&&this._board[p.e8]?.color===o;t&&this._board[p.a1]?.type===s&&this._board[p.a1]?.color===n||(this._castling.w&=~d.QSIDE_CASTLE),t&&this._board[p.h1]?.type===s&&this._board[p.h1]?.color===n||(this._castling.w&=~d.KSIDE_CASTLE),e&&this._board[p.a8]?.type===s&&this._board[p.a8]?.color===o||(this._castling.b&=~d.QSIDE_CASTLE),e&&this._board[p.h8]?.type===s&&this._board[p.h8]?.color===o||(this._castling.b&=~d.KSIDE_CASTLE)}_updateEnPassantSquare(){if(this._epSquare===h)return;const t=this._epSquare+(this._turn===n?-16:16),e=this._epSquare+(this._turn===n?16:-16),r=[e+1,e-1];null===this._board[t]&&null===this._board[this._epSquare]&&this._board[e]?.color===P(this._turn)&&this._board[e]?.type===i&&r.some((t=>!(136&t)&&this._board[t]?.color===this._turn&&this._board[t]?.type===i))||(this._epSquare=h)}_attacked(t,e){for(let r=p.a8;r<=p.h1;r++){if(136&r){r+=7;continue}if(void 0===this._board[r]||this._board[r].color!==t)continue;const a=this._board[r],s=r-e;if(0===s)continue;const c=s+119;if(g[c]&b[a.type]){if(a.type===i){if(s>0){if(a.color===n)return!0}else if(a.color===o)return!0;continue}if("n"===a.type||"k"===a.type)return!0;const t=y[c];let u=r+t,l=!1;for(;u!==e;){if(null!=this._board[u]){l=!0;break}u+=t}if(!l)return!0}}return!1}_isKingAttacked(t){const e=this._kings[t];return-1!==e&&this._attacked(P(t),e)}isAttacked(t,e){return this._attacked(e,p[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},e=[];let r=0,n=0;for(let o=p.a8;o<=p.h1;o++){if(n=(n+1)%2,136&o){o+=7;continue}const i=this._board[o];i&&(t[i.type]=i.type in t?t[i.type]+1:1,i.type===a&&e.push(n),r++)}if(2===r)return!0;if(3===r&&(1===t[a]||1===t.n))return!0;if(r===t[a]+2){let t=0;const r=e.length;for(let n=0;n<r;n++)t+=e[n];if(0===t||t===r)return!0}return!1}isThreefoldRepetition(){const t=[],e={};let r=!1;for(;;){const e=this._undoMove();if(!e)break;t.push(e)}for(;;){const n=this.fen().split(" ").slice(0,4).join(" ");e[n]=n in e?e[n]+1:1,e[n]>=3&&(r=!0);const o=t.pop();if(!o)break;this._makeMove(o)}return r}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:t=!1,square:e,piece:r}={}){const n=this._moves({square:e,piece:r});return t?n.map((t=>this._makePretty(t))):n.map((t=>this._moveToSan(t,n)))}_moves({legal:t=!0,piece:e,square:r}={}){const n=r?r.toLowerCase():void 0,o=e?.toLowerCase(),a=[],s=this._turn,c=P(s);let l=p.a8,h=p.h1,f=!1;if(n){if(!(n in p))return[];l=h=p[n],f=!0}for(let t=l;t<=h;t++){if(136&t){t+=7;continue}if(!this._board[t]||this._board[t].color===c)continue;const{type:e}=this._board[t];let r;if(e===i){if(o&&o!==e)continue;r=t+v[s][0],this._board[r]||(q(a,s,t,r,i),r=t+v[s][1],k[s]!==L(t)||this._board[r]||q(a,s,t,r,i,void 0,d.BIG_PAWN));for(let e=2;e<4;e++)r=t+v[s][e],136&r||(this._board[r]?.color===c?q(a,s,t,r,i,this._board[r].type,d.CAPTURE):r===this._epSquare&&q(a,s,t,r,i,i,d.EP_CAPTURE))}else{if(o&&o!==e)continue;for(let n=0,o=m[e].length;n<o;n++){const o=m[e][n];for(r=t;r+=o,!(136&r);){if(this._board[r]){if(this._board[r].color===s)break;q(a,s,t,r,e,this._board[r].type,d.CAPTURE);break}if(q(a,s,t,r,e),"n"===e||e===u)break}}}}if(!(void 0!==o&&o!==u||f&&h!==this._kings[s])){if(this._castling[s]&d.KSIDE_CASTLE){const t=this._kings[s],e=t+2;this._board[t+1]||this._board[e]||this._attacked(c,this._kings[s])||this._attacked(c,t+1)||this._attacked(c,e)||q(a,s,this._kings[s],e,u,void 0,d.KSIDE_CASTLE)}if(this._castling[s]&d.QSIDE_CASTLE){const t=this._kings[s],e=t-2;this._board[t-1]||this._board[t-2]||this._board[t-3]||this._attacked(c,this._kings[s])||this._attacked(c,t-1)||this._attacked(c,e)||q(a,s,this._kings[s],e,u,void 0,d.QSIDE_CASTLE)}}if(!t||-1===this._kings[s])return a;const g=[];for(let t=0,e=a.length;t<e;t++)this._makeMove(a[t]),this._isKingAttacked(s)||g.push(a[t]),this._undoMove();return g}move(t,{strict:e=!1}={}){let r=null;if("string"==typeof t)r=this._moveFromSan(t,e);else if("object"==typeof t){const e=this._moves();for(let n=0,o=e.length;n<o;n++)if(t.from===A(e[n].from)&&t.to===A(e[n].to)&&(!("promotion"in e[n])||t.promotion===e[n].promotion)){r=e[n];break}}if(!r)throw"string"==typeof t?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);const n=this._makePretty(r);return this._makeMove(r),n}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(t){const e=this._turn,r=P(e);if(this._push(t),this._board[t.to]=this._board[t.from],delete this._board[t.from],t.flags&d.EP_CAPTURE&&(this._turn===o?delete this._board[t.to-16]:delete this._board[t.to+16]),t.promotion&&(this._board[t.to]={type:t.promotion,color:e}),this._board[t.to].type===u){if(this._kings[e]=t.to,t.flags&d.KSIDE_CASTLE){const e=t.to-1,r=t.to+1;this._board[e]=this._board[r],delete this._board[r]}else if(t.flags&d.QSIDE_CASTLE){const e=t.to+1,r=t.to-2;this._board[e]=this._board[r],delete this._board[r]}this._castling[e]=0}if(this._castling[e])for(let r=0,n=S[e].length;r<n;r++)if(t.from===S[e][r].square&&this._castling[e]&S[e][r].flag){this._castling[e]^=S[e][r].flag;break}if(this._castling[r])for(let e=0,n=S[r].length;e<n;e++)if(t.to===S[r][e].square&&this._castling[r]&S[r][e].flag){this._castling[r]^=S[r][e].flag;break}t.flags&d.BIG_PAWN?this._epSquare=e===o?t.to-16:t.to+16:this._epSquare=h,t.piece===i||t.flags&(d.CAPTURE|d.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,e===o&&this._moveNumber++,this._turn=r}undo(){const t=this._undoMove();return t?this._makePretty(t):null}_undoMove(){const t=this._history.pop();if(void 0===t)return null;const e=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber;const r=this._turn,n=P(r);if(this._board[e.from]=this._board[e.to],this._board[e.from].type=e.piece,delete this._board[e.to],e.captured)if(e.flags&d.EP_CAPTURE){let t;t=r===o?e.to-16:e.to+16,this._board[t]={type:i,color:n}}else this._board[e.to]={type:e.captured,color:n};if(e.flags&(d.KSIDE_CASTLE|d.QSIDE_CASTLE)){let t,r;e.flags&d.KSIDE_CASTLE?(t=e.to+1,r=e.to-1):(t=e.to-2,r=e.to+1),this._board[t]=this._board[r],delete this._board[r]}return e}pgn({newline:t="\n",maxWidth:e=0}={}){const r=[];let n=!1;for(const e in this._header)r.push("["+e+' "'+this._header[e]+'"]'+t),n=!0;n&&this._history.length&&r.push(t);const o=t=>{const e=this._comments[this.fen()];return void 0!==e&&(t=`${t}${t.length>0?" ":""}{${e}}`),t},i=[];for(;this._history.length>0;)i.push(this._undoMove());const a=[];let s="";for(0===i.length&&a.push(o(""));i.length>0;){s=o(s);const t=i.pop();if(!t)break;if(this._history.length||"b"!==t.color)"w"===t.color&&(s.length&&a.push(s),s=this._moveNumber+".");else{const t=`${this._moveNumber}. ...`;s=s?`${s} ${t}`:t}s=s+" "+this._moveToSan(t,this._moves({legal:!0})),this._makeMove(t)}if(s.length&&a.push(o(s)),void 0!==this._header.Result&&a.push(this._header.Result),0===e)return r.join("")+a.join(" ");const c=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=function(n,o){for(const i of o.split(" "))if(i){if(n+i.length>e){for(;c();)n--;r.push(t),n=0}r.push(i),n+=i.length,r.push(" "),n++}return c()&&n--,n};let l=0;for(let n=0;n<a.length;n++)l+a[n].length>e&&a[n].includes("{")?l=u(l,a[n]):(l+a[n].length>e&&0!==n?(" "===r[r.length-1]&&r.pop(),r.push(t),l=0):0!==n&&(r.push(" "),l++),r.push(a[n]),l+=a[n].length);return r.join("")}header(...t){for(let e=0;e<t.length;e+=2)"string"==typeof t[e]&&"string"==typeof t[e+1]&&(this._header[t[e]]=t[e+1]);return this._header}loadPgn(t,{strict:e=!1,newlineChar:r="\r?\n"}={}){function n(t){return t.replace(/\\/g,"\\")}t=t.trim();const o=new RegExp("^(\\[((?:"+n(r)+")|.)*\\])((?:\\s*"+n(r)+"){2}|(?:\\s*"+n(r)+")*$)").exec(t),i=o&&o.length>=2?o[1]:"";this.reset();const a=function(t){const e={},o=t.split(new RegExp(n(r)));let i="",a="";for(let t=0;t<o.length;t++){const r=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;i=o[t].replace(r,"$1"),a=o[t].replace(r,"$2"),i.trim().length>0&&(e[i]=a)}return e}(i);let s="";for(const t in a)"fen"===t.toLowerCase()&&(s=a[t]),this.header(t,a[t]);if(e){if("1"===a.SetUp){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,!0)}}else s&&this.load(s,!0);const c=function(t){return`{${function(t){return Array.from(t).map((function(t){return t.charCodeAt(0)<128?t.charCodeAt(0).toString(16):encodeURIComponent(t).replace(/%/g,"").toLowerCase()})).join("")}((t=t.replace(new RegExp(n(r),"g")," ")).slice(1,t.length-1))}}`},u=function(t){if(t.startsWith("{")&&t.endsWith("}"))return function(t){return 0==t.length?"":decodeURIComponent("%"+(t.match(/.{1,2}/g)||[]).join("%"))}(t.slice(1,t.length-1))};let l=t.replace(i,"").replace(new RegExp(`({[^}]*})+?|;([^${n(r)}]*)`,"g"),(function(t,e,r){return void 0!==e?c(e):" "+c(`{${r.slice(1)}}`)})).replace(new RegExp(n(r),"g")," ");const h=/(\([^()]+\))+?/g;for(;h.test(l);)l=l.replace(h,"");l=l.replace(/\d+\.(\.\.)?/g,""),l=l.replace(/\.\.\./g,""),l=l.replace(/\$\d+/g,"");let f=l.trim().split(new RegExp(/\s+/));f=f.filter((t=>""!==t));let d="";for(let t=0;t<f.length;t++){const r=u(f[t]);if(void 0!==r){this._comments[this.fen()]=r;continue}const n=this._moveFromSan(f[t],e);if(null==n){if(!(E.indexOf(f[t])>-1))throw new Error(`Invalid move in PGN: ${f[t]}`);d=f[t]}else d="",this._makeMove(n)}d&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",d)}_moveToSan(t,e){let r="";if(t.flags&d.KSIDE_CASTLE)r="O-O";else if(t.flags&d.QSIDE_CASTLE)r="O-O-O";else{if(t.piece!==i){const n=function(t,e){const r=t.from,n=t.to,o=t.piece;let i=0,a=0,s=0;for(let t=0,c=e.length;t<c;t++){const c=e[t].from,u=e[t].to;o===e[t].piece&&r!==c&&n===u&&(i++,L(r)===L(c)&&a++,C(r)===C(c)&&s++)}return i>0?a>0&&s>0?A(r):s>0?A(r).charAt(1):A(r).charAt(0):""}(t,e);r+=t.piece.toUpperCase()+n}t.flags&(d.CAPTURE|d.EP_CAPTURE)&&(t.piece===i&&(r+=A(t.from)[0]),r+="x"),r+=A(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,e=!1){const r=T(t);let n,o,i,a,s,c=M(r),u=this._moves({legal:!0,piece:c});for(let t=0,e=u.length;t<e;t++)if(r===T(this._moveToSan(u[t],u)))return u[t];if(e)return null;let l=!1;if(o=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),o?(n=o[1],i=o[2],a=o[3],s=o[4],1==i.length&&(l=!0)):(o=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),o&&(n=o[1],i=o[2],a=o[3],s=o[4],1==i.length&&(l=!0))),c=M(r),u=this._moves({legal:!0,piece:n||c}),!a)return null;for(let t=0,e=u.length;t<e;t++)if(i){if(!(n&&n.toLowerCase()!=u[t].piece||p[i]!=u[t].from||p[a]!=u[t].to||s&&s.toLowerCase()!=u[t].promotion))return u[t];if(l){const e=A(u[t].from);if(!(n&&n.toLowerCase()!=u[t].piece||p[a]!=u[t].to||i!=e[0]&&i!=e[1]||s&&s.toLowerCase()!=u[t].promotion))return u[t]}}else if(r===T(this._moveToSan(u[t],u)).replace("x",""))return u[t];return null}ascii(){let t="   +------------------------+\n";for(let e=p.a8;e<=p.h1;e++){if(0===C(e)&&(t+=" "+"87654321"[L(e)]+" |"),this._board[e]){const r=this._board[e].type;t+=" "+(this._board[e].color===n?r.toUpperCase():r.toLowerCase())+" "}else t+=" . ";e+1&136&&(t+="|\n",e+=8)}return t+="   +------------------------+\n",t+="     a  b  c  d  e  f  g  h",t}perft(t){const e=this._moves({legal:!1});let r=0;const n=this._turn;for(let o=0,i=e.length;o<i;o++)this._makeMove(e[o]),this._isKingAttacked(n)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}_makePretty(t){const{color:e,piece:r,from:n,to:o,flags:i,captured:a,promotion:s}=t;let c="";for(const t in d)d[t]&i&&(c+=f[t]);const u=A(n),l=A(o),h={color:e,piece:r,from:u,to:l,san:this._moveToSan(t,this._moves({legal:!0})),flags:c,lan:u+l,before:this.fen(),after:""};return this._makeMove(t),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),s&&(h.promotion=s,h.lan+=s),h}turn(){return this._turn}board(){const t=[];let e=[];for(let r=p.a8;r<=p.h1;r++)null==this._board[r]?e.push(null):e.push({square:A(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(e),e=[],r+=8);return t}squareColor(t){if(t in p){const e=p[t];return(L(e)+C(e))%2==0?"light":"dark"}return null}history({verbose:t=!1}={}){const e=[],r=[];for(;this._history.length>0;)e.push(this._undoMove());for(;;){const n=e.pop();if(!n)break;t?r.push(this._makePretty(n)):r.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return r}_pruneComments(){const t=[],e={},r=t=>{t in this._comments&&(e[t]=this._comments[t])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const e=t.pop();if(!e)break;this._makeMove(e),r(this.fen())}this._comments=e}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map((t=>({fen:t,comment:this._comments[t]})))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map((t=>{const e=this._comments[t];return delete this._comments[t],{fen:t,comment:e}}))}setCastlingRights(t,e){for(const r of[u,c])void 0!==e[r]&&(e[r]?this._castling[t]|=_[r]:this._castling[t]&=~_[r]);this._updateCastlingRights();const r=this.getCastlingRights(t);return!(void 0!==e[u]&&e[u]!==r[u]||void 0!==e[c]&&e[c]!==r[c])}getCastlingRights(t){return{[u]:0!=(this._castling[t]&_[u]),[c]:0!=(this._castling[t]&_[c])}}moveNumber(){return this._moveNumber}}},569:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{P2:()=>u,ZP:()=>l,eA:()=>h});var o=r(74),i=r(982),a=t([o]);o=(a.then?(await a)():a)[0];var s=1,c=.8;function u(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.history.length,i=t.timeline;if(i!==e){var a,s,c=0!==i?t.history[n-i]:t;if(c.showingWhiteSide=t.showingWhiteSide,1!==Math.abs(e-i))return 0===i?void(0,o.o3)(t):i===n?(t.history[0].showingWhiteSide=t.showingWhiteSide,void(0,o.o3)(t.history[0])):(t.history[t.history.length-t.timeline].showingWhiteSide=t.showingWhiteSide,void(0,o.o3)(t.history[t.history.length-t.timeline]));if(i>e&&(a=1===i?t.lastMove[0]:t.history[n-i+1].lastMove[0],s=1===i?t.lastMove[1]:t.history[n-i+1].lastMove[1]),i<e&&(s=c.lastMove[0],a=c.lastMove[1]),t.div.querySelector(".animating")){var u=i<e;t.timeline?(t.history[t.history.length-t.timeline].showingWhiteSide=t.showingWhiteSide,(0,o.o3)(t.history[t.history.length-t.timeline]),u&&r&&(0,o.GN)(t.history[t.history.length-t.timeline])):((0,o.o3)(t),u&&r&&(0,o.GN)(t))}else i<e&&r&&(0,o.GN)(c),h(s,a,c.div.firstChild).then((function(){t.timeline?(t.history[t.history.length-t.timeline].showingWhiteSide=t.showingWhiteSide,(0,o.o3)(t.history[t.history.length-t.timeline])):(0,o.o3)(t)})).catch((function(t){console.log("caught error",t)}))}}function l(t,e,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(t.board[e][r]&&t.board[e][r].move(n,a,u||void 0,l)){0!==t.timeline&&(t.timeline=0,(0,o.o3)(t.history[t.history.length-1]));var f=(0,i.aZ)(e,r),d=(0,i.aZ)(n,a);return s&&(0,o.GN)(t),h(f,d,t.div.firstChild,c).then((function(){(0,o.o3)(t)})).catch((function(){(0,o.o3)(t)})),!0}return!1}function h(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,o=r.querySelector("[notation=".concat(t,"]")),i=r.querySelector("[notation=".concat(e,"]")),a=o.offsetWidth/2,c=o.getBoundingClientRect().left+a,u=o.getBoundingClientRect().top+a,l=i.getBoundingClientRect().left+a,h=i.getBoundingClientRect().top+a,f=Math.sqrt(Math.pow((c-l)/a,2)+Math.pow((u-h)/a,2))*(1/n)*250;f=f<=100/n?f:100/n;var d,p=o.lastChild;return p?(r.querySelectorAll(".highlighted").forEach((function(t){t.classList.remove("highlighted")})),r.querySelector("[notation=".concat(t)).classList.add("highlighted"),r.querySelector("[notation=".concat(e)).classList.add("highlighted"),p.animate([{transform:"translate(0px, 0px)"},{transform:"translate(".concat(l-c,"px, ").concat(h-u,"px)")}],{duration:f,iterations:1}),p.classList.add("animating")):d=new Error("Nothing to animate from ".concat(t)),new Promise((function(t,e){d&&e(d),setTimeout((function(){t()}),f-10)}))}n()}catch(f){n(f)}}))},74:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{$n:()=>k,GN:()=>E,dm:()=>x,dz:()=>P,hR:()=>C,o3:()=>L,wn:()=>q,zM:()=>A});var o=r(813),i=r(982),a=r(111),s=r(398),c=r(569),u=r(643),l=r(512),h=r(315),f=r(173),d=r(6),p=t([o,a,c,f,d]);function m(t){return w(t)||b(t)||y(t)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function b(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function w(t){if(Array.isArray(t))return _(t)}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}[o,a,c,f,d]=p.then?(await p)():p;var v={place:u,capture:l,check:h};function S(t){var e=document.createElement("span"),r=document.createElement("span");e.classList.add("whiteUser"),r.classList.add("blackUser");var n={board:m(Array(8)).map((function(t){return Array(8).fill(null)})),div:null,whitesMove:!0,whiteState:{shortCastle:!1,longCastle:!1},blackState:{shortCastle:!1,longCastle:!1},history:[],timeline:0,lastMove:null,lastMoveSound:null,drawnArrows:[],userHighlights:[],playerIsWhite:!0,showingWhiteSide:!0,fiftyMoveRule:0,export:[t],whiteUserSpan:e,blackUserSpan:r},a={p:"pawn",q:"queen",b:"bishop",n:"knight",r:"rook",k:"king"};if(m((t=t.split(" "))[0].split("/")).reverse().forEach((function(t,e){(t=t.replace(/\d+/g,(function(t){return"#".repeat(Number(t))}))).split("").reverse().forEach((function(t,r){var i=t===t.toUpperCase();"#"!==t&&(0,o.ZP)(a[t.toLowerCase()],i,e,r,n)}))})),n.whitesMove="w"===t[1],t[2].split("").forEach((function(t){"k"===t&&(n.blackState.shortCastle=!0),"q"===t&&(n.blackState.longCastle=!0),"K"===t&&(n.whiteState.shortCastle=!0),"Q"===t&&(n.whiteState.longCastle=!0)})),"-"!==t[3]){var s=(0,i.Wt)(t[3]);(0,o.ZP)("passant",!n.whitesMove,s[0],s[1],n)}return n.fiftyMoveRule=Number(t[4]),n}function k(t){var e,r={pawn:"p",queen:"q",bishop:"b",knight:"n",rook:"r",king:"k"},n=0,o="";return m(t.board).reverse().forEach((function(t,i){m(t).reverse().forEach((function(t,a){if(null===t&&(n+=1),t&&"passant"===t.name&&(n+=1,e=[7-i,7-a]),t&&"passant"!==t.name){var s=r[t.name];o+=n||"",o+=t.isWhite?s.toUpperCase():s,n=0}})),o+=n||"",n=0,o+="/"})),o=o.substring(0,o.length-1)+" ",o+=t.whitesMove?"w ":"b ",t.whiteState.shortCastle&&(o+="K"),t.whiteState.longCastle&&(o+="Q"),t.blackState.shortCastle&&(o+="k"),t.blackState.longCastle&&(o+="q"),t.whiteState.shortCastle||t.whiteState.longCastle||t.blackState.shortCastle||t.blackState.longCastle||(o+="-"),o+=" ",o+=e?(0,i.aZ)(e[0],e[1]):"-",o+=" ".concat(t.fiftyMoveRule," ").concat(Math.floor((t.export.length-1)/2)+1)}function E(t){t.lastMoveSound&&new Audio(v[t.lastMoveSound]).play()}function L(t){var e=t.showingWhiteSide,r=t.div.firstChild,n=t.timeline;r.innerHTML="",r.parentNode.querySelector("#svg-canvas")&&r.parentNode.querySelector("#svg-canvas").remove();var c=e?m(t.board).reverse():t.board,u=e?-1:1,l=null!==t.lastMove,h=!0,f=e?7:0,p=(0,s.kk)(r);c.forEach((function(o){var c=e?7:0;(e?m(o).reverse():o).forEach((function(e){var o=document.createElement("div"),l=(0,i.aZ)(f,c);o.setAttribute("notation",l),o.classList.add("square"),(0,s.G5)(o,t,p),(h=!h)&&o.classList.add("dark");var d=!!e&&e.svg;if(d){var v=document.createElement("img");v.src=d,0!==n||t.result||null!==t.playerIsWhite&&e.isWhite===t.playerIsWhite&&t.playerIsWhite===t.whitesMove&&(0,a.Z)(e,v,L),o.appendChild(v)}r.appendChild(o),c+=u})),h=!h,f+=u}));var v=(0,o.nL)(t);return v&&r.querySelector("[notation=".concat(v,"]")).classList.add("check"),l&&(r.querySelector("[notation=".concat(t.lastMove[0])).classList.add("highlighted"),r.querySelector("[notation=".concat(t.lastMove[1])).classList.add("highlighted")),t.result&&(0,d.es)(t.result),(0,s.BK)(t,p),(0,s.En)(r,e),(0,s.hN)(r),r}function C(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=(0,i.Wt)(e.substring(0,2).toLowerCase()),u=(0,i.Wt)(e.substring(2,4).toLowerCase()),l=e.substring(4,5),h=!!l&&{q:"queen",r:"rook",n:"knight",b:"bishop"}[l.toLowerCase()];if(a)return t.board[s[0]][s[1]].move(u[0],u[1],h,!1,!0),t;if((0,c.ZP)(t,s[0],s[1],u[0],u[1],r,h)){if(t.export.push(e),!n){var f=(0,o.e2)(t);f&&(t.result={result:f.result,reason:f.reason})}var p=document.querySelector("ol");return p&&(0,d.l9)(t,p),t}throw new Error("Could not complete move.")}function x(t,e,r){var n=t.lastMove.join("").concat(e?e[0]:"");if(r){if(3===r.readyState)return(0,f.jG)(t,!1),void(0,d.es)("Not connected to the game. Try refreshing?");r.send(JSON.stringify({uci:n,id:t.id,token:localStorage.getItem("token")})),t.timer&&t.timer.alternate();var i=document.querySelector("ol");i&&(0,d.l9)(t,i)}var a=(0,o.e2)(t);return a&&(t.result={result:a.result,reason:a.reason}),t.export.push(n),n}function A(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=setInterval((function(){if(0!==e.length){var n=e.shift();C(t,n,r)}else clearInterval(o)}),n);return new Promise((function(t){setTimeout((function(){t()}),n*(e.length+2))}))}function P(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("div"),n=document.createElement("div");r.id="board-container",n.id="board",r.appendChild(n),r.oncontextmenu=function(){return!1},t||(t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");var o=S(t);return o.div=r,e&&L(o),o}function q(t){var e=P(t[0],!0);return t.length>1&&t.slice(1).forEach((function(t){t.forEach((function(t){""!==t&&C(e,t,!1,!0,!0)}))})),e.result=(0,o.e2)(e),L(e),e}n()}catch(M){n(M)}}))},111:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>c});var o=r(982),i=r(569),a=r(74),s=t([i,a]);function c(t,e,r){e.addEventListener("mousedown",(function(n){if(!e.parentNode.classList.contains("possiblepiece")){n.preventDefault();var s=e.parentNode.classList.contains("highlighted"),c=t.game.div.firstChild;1===n.buttons&&(c=r(t.game),e=c.querySelector("[notation=".concat((0,o.aZ)(t.xPos,t.yPos))).lastChild);var f,d=h(t.moves(),c),p=c.querySelectorAll(".square"),v=e.parentNode,m=!1;1===n.buttons&&(e.parentNode.parentNode.parentNode.querySelector("#svg-canvas").innerHTML="",t.game.drawnArrows=[],t.game.userHighlights=[],f=e.parentNode.parentNode.offsetWidth/8,document.addEventListener("mousedown",y),document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),p.forEach((function(t){d.includes(t)?(t.querySelector("img")?t.classList.add("possiblepiece"):t.classList.add("possible"),t.addEventListener("click",_)):t.addEventListener("click",g)})),u(n,e,f))}function g(e){e.preventDefault(),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",b),document.removeEventListener("click",g),p.forEach((function(t){t.removeEventListener("click",_),t.removeEventListener("click",g)})),r(t.game)}function y(e){e.preventDefault(),1!==e.buttons&&(document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",b),document.removeEventListener("click",g),document.removeEventListener("mousedown",y),r(t.game))}function b(t){c.querySelector("#board .square.select")!==v&&(m=!0),u(t,e,f)}function w(o){o.preventDefault(),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",b),e.style.pointerEvents="auto";var i=l(c);0===o.buttons&&t.move(i[0],i[1],!1,!0)&&((0,a.GN)(t.game),r(t.game)),m?g(n):(e.style.position=null,e.style.zIndex="1",s&&g(n))}function _(e){e.preventDefault();var r=(0,o.Wt)(e.target.getAttribute("notation")||e.target.parentNode.getAttribute("notation")),n=[t.xPos,t.yPos];c.querySelectorAll(".possible").forEach((function(t){t.classList.remove("possible")})),c.querySelectorAll(".possiblepiece").forEach((function(t){t.classList.remove("possiblepiece")})),(0,i.ZP)(t.game,n[0],n[1],r[0],r[1],!1,!1,!0),(0,a.GN)(t.game),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",b),document.removeEventListener("click",g),p.forEach((function(t){t.removeEventListener("click",_),t.removeEventListener("click",g)}))}}))}function u(t,e,r){var n=t.clientX-r/2,o=t.clientY-r/2;e.style.pointerEvents="none",e.style.zIndex="2",e.style.position="fixed",e.style.width="".concat(r,"px"),e.style.height="".concat(r,"px"),e.style.left="".concat(n,"px"),e.style.top="".concat(o,"px"),e.parentNode.classList.add("highlighted")}function l(t){var e=t.querySelector(".square.select");return!!e&&(0,o.Wt)(e.getAttribute("notation"))}function h(t,e){var r=[];return t.forEach((function(t){var n=(0,o.aZ)(t[0],t[1]),i=e.querySelector("[notation=".concat(n));r.push(i)})),r}[i,a]=s.then?(await s)():s,n()}catch(f){n(f)}}))},398:(t,e,r)=>{function n(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.id="svg-canvas",e.setAttribute("height",t.offsetHeight),e.setAttribute("width",t.offsetWidth),e.setAttribute("viewBox","0 0 ".concat(t.offsetWidth," ").concat(t.offsetHeight)),t.parentNode.appendChild(e),e}function o(t){t.querySelectorAll("#board .square").forEach((function(t){t.addEventListener("mouseover",(function(){t.classList.add("select")})),t.addEventListener("mouseout",(function(){t.classList.remove("select")}))}))}function i(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=o.viewBox.baseVal.width,s=a/80*(i?.75:1),c=a/32*(i?.75:1),u=a/-21.5*(i?.75:1),l=a/21,h=r-t,f=n-e,d=Math.sqrt(h*h+f*f),p=f/d,v=h/d;h=(r-=i?11*v:v)-(t+=l*v),f=(n-=i?11*p:v)-(e+=l*p),d=Math.sqrt(h*h+f*f);var m=[0,s,u,s,u,c],g=[];g.push(0,0);for(var y=0;y<m.length;y+=2){var b=m[y],w=m[y+1];g.push(b<0?d+b:b,w)}g.push(d,0);for(var _=m.length;_>0;_-=2){var S=m[_-2],k=m[_-1];g.push(S<0?d+S:S,-k)}g.push(0,0);for(var E="",L=0;L<g.length;L+=2){var C=g[L]*v-g[L+1]*p+t,x=g[L]*p+g[L+1]*v+e;E+="".concat(C,",").concat(x," ")}var A=document.createElementNS("http://www.w3.org/2000/svg","polygon");A.setAttribute("points",E),A.setAttribute("fill","orange"),A.setAttribute("opacity","0.65"),o.appendChild(A)}function a(t){t.div.querySelectorAll(".userHighlight").forEach((function(t){t.classList.remove("userHighlight")})),t.userHighlights.forEach((function(e){t.div.querySelector("[notation=".concat(e)).classList.add("userHighlight")}))}function s(t,e){t.drawnArrows.forEach((function(r){var n=t.div.querySelector("[notation=".concat(r[0])),o=t.div.querySelector("[notation=".concat(r[1])),a=n.offsetWidth;i(n.offsetLeft+a/2,n.offsetTop+a/2,o.offsetLeft+a/2,o.offsetTop+a/2,e)}))}function c(t,e){a(t),s(t,e)}function u(t,e,r){var n,o,c,u;t.addEventListener("mousedown",(function(l){var h,f,d=t.getAttribute("notation");if(2==l.buttons){var p=e.div;p.querySelector(".square:not(.possible):not(.possiblepiece)").click(),t=p.querySelector("[notation=".concat(d,"]")),r=p.querySelector("#svg-canvas"),h=t.parentNode,f=t.offsetWidth,r.viewBox.baseVal.width!==h.offsetWidth&&r.setAttribute("viewBox","0 0 ".concat(h.offsetWidth," ").concat(h.offsetWidth)),n=t.offsetLeft+f/2,o=t.offsetTop+f/2,c=n,u=o,document.addEventListener("mousemove",v),document.addEventListener("mouseup",m)}else t.parentNode&&(t.parentNode.querySelectorAll(".square").forEach((function(t){t.classList.remove("userHighlight")})),e.drawnArrows=[],e.userHighlights=[],r.innerHTML="",document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m));function v(t){r.innerHTML="";var a=h.querySelector(".square.select");a&&(c=a.offsetLeft+f/2||n,u=a.offsetTop+f/2||o,i(n,o,c,u,r,!0)),s(e,r)}function m(n){if(document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),t.parentNode&&2===n.button){var o=t,i=t.parentNode.querySelector(".square.select");if(i&&o===i){var c=o.getAttribute("notation"),u=e.userHighlights.indexOf(c);-1===u?e.userHighlights.push(c):e.userHighlights.splice(u,1),a(e)}else if(i){var l=[o.getAttribute("notation"),i.getAttribute("notation")],h=!1;e.drawnArrows.forEach((function(t,e){t.every((function(t,e){return t===l[e]}))&&(h=e)})),h||0===h?e.drawnArrows.splice(h,1):e.drawnArrows.push(l),r.innerHTML="",s(e,r)}}}}))}function l(t,e){for(var r=["a","b","c","d","e","f","g","h"],n=e?"a":"h",o=e?1:8,i=!e,a=1;a<=8;a++){var s=t.querySelector("[notation=".concat(n+a,"]")),c=document.createElement("span");c.classList.add("left-notation"),c.classList.add(i?"dark":"light"),c.innerHTML=a,s.prepend(c),i=!i}for(var u in r){var l=t.querySelector("[notation=".concat(r[u]+o,"]")),h=document.createElement("span");h.classList.add("bottom-notation"),h.classList.add(i?"dark":"light"),h.innerHTML=r[u],l.prepend(h),i=!i}}r.d(e,{BK:()=>c,En:()=>l,G5:()=>u,hN:()=>o,kk:()=>n})},173:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{By:()=>w,Pf:()=>m,VB:()=>y,ck:()=>v,d7:()=>g,jG:()=>b,w_:()=>p});var o=r(74),i=r(813),a=r(569),s=r(982),c=t([o,i,a]);function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=t.history.length,r=t.timeline;if(t.timeline<e&&t.timeline++,1!==t.timeline)(0,a.P2)(t,r);else{var n=(0,s.Wt)(t.lastMove[1]);"pawn"!==t.board[n[0]][n[1]].name||0!==n[0]&&7!==n[0]?(0,a.P2)(t,r):(b(t),t.div.querySelector(".promotion").remove())}}function v(t){var e=t.timeline;t.timeline>0&&t.timeline--,(0,a.P2)(t,e)}function m(t){var e=t.timeline,r=t.history.length;t.timeline=r,(0,a.P2)(t,e)}function g(t){var e=t.timeline;t.timeline=0,(0,a.P2)(t,e)}function y(t){t.showingWhiteSide=!t.showingWhiteSide,0!==t.timeline?(t.history[t.history.length-t.timeline].showingWhiteSide=t.showingWhiteSide,(0,o.o3)(t.history[t.history.length-t.timeline])):(0,o.o3)(t);var e,r,n,i=document.querySelector("#whiteInfo"),a=document.querySelector("#blackInfo");i&&a&&(e=i,r=a,n=document.createElement("span"),e.before(n),r.before(e),n.replaceWith(r))}function b(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.history.length<1)return!1;var n=document.querySelector("ol");if(n&&r){var s=n.querySelector("li:last-child > span:last-child");""===s.textContent?n.querySelector("li:last-child").remove():s.textContent=""}var c=t.lastMove;e&&(0,o.o3)(t);var d,p=(0,i.GM)(t.history[t.history.length-1].board);t.board=(d=Array(8),f(d)||h(d)||l(d)||u()).map((function(t){return Array(8).fill(null)})),p.forEach((function(e,r){e.forEach((function(e,n){e&&(0,i.ZP)(p[r][n].name,p[r][n].isWhite,r,n,t)}))}));var v=t.history[t.history.length-1];return["whiteState","blackState","lastMove","fiftyMoveRule","whiteUserSpan","blackUserSpan","lastMoveSound","whitesMove","drawnArrows","userHighlights","showingWhiteSide"].forEach((function(e){t[e]=v[e]})),t.timeline=0,t.history.length>1&&(t.history.pop(),t.export.pop()),c&&e?(0,a.eA)(c[1],c[0],t.div.firstChild).then((function(){(0,o.o3)(t)})):e&&(0,o.o3)(t),t}function w(t,e){t.playerIsWhite=!t.playerIsWhite,e&&(t.playerIsWhite=null),(0,o.o3)(t)}[o,i,a]=c.then?(await c)():c,n()}catch(_){n(_)}}))},982:(t,e,r)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){return"".concat({0:"h",1:"g",2:"f",3:"e",4:"d",5:"c",6:"b",7:"a"}[e]).concat(t+1)}function i(t){return[Number(t[1].toLowerCase())-1,{h:0,g:1,f:2,e:3,d:4,c:5,b:6,a:7}[t[0]]]}function a(t,e){var r=t.lastMove[0],n=t.lastMove[1],o=i(r),a=i(n),u=e[o[0]][o[1]].name,l=t.board[a[0]][a[1]].name,h=null!==e[a[0]][a[1]]?"x":"",f=function(t,e){if("check"===t.lastMoveSound){if(!t.result)return"+";if("Checkmate"===t.result.reason&&function(t,e){for(var r=0;r<8;r++)for(var n=0;n<8;n++){if(t[r][n]&&!e[r][n])return!1;if(!t[r][n]&&e[r][n])return!1;if(t[r][n]!==e[r][n])return!1}return!0}(t.history[t.history.length-1].board,e))return"#"}return""}(t,e),d=function(t,e,r,n,o){for(var a=e,c=i(r),u=c[0],l=c[1],h=(c=i(n))[0],f=c[1],d=t.board[h][f].isWhite,p=!1,v=!1,m=0;m<8;m++)for(var g=0;g<8;g++){var y=a[m][g];if(y&&y.name===o&&y.isWhite===d&&m!==u&&g!==l&&s(y.standardMoves(),h,f)){if(g===l&&(p=!0),m===u&&(v=!0),v&&p)break;p||v||(p=!0)}}return"".concat(p?r[0]:"").concat(v?r[1]:"")}(t,e,r,n,l),p=function(t,e,r,n,o,i){return c(n,t,e)?c(n,t,e)+i:"pawn"===n?o?"".concat(t[0],"x").concat(e).concat(i):"".concat(e).concat(i):r!==n?o?"".concat(r[0],"x").concat(e).concat(i):e+i:void 0}(r,n,u,l,h,f);if(p)return p;var v="knight"===l?"N":l[0].toUpperCase();return"".concat(v).concat(d).concat(h).concat(n).concat(f)}function s(t,e,r){var o,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a[0]===e&&a[1]===r)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}function c(t,e,r){if("king"===t&&"e"===e[0]){if("g"===r[0])return"O-O";if("c"===r[0])return"O-O-O"}return!1}r.d(e,{O$:()=>a,Wt:()=>i,aZ:()=>o})},781:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>h});var o=r(813),i=t([o]);function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function l(t){if(Array.isArray(t))return t}function h(t){var e=t.isWhite,r=t.xPos,n=t.yPos,i=t.game,c=(0,o.Xw)({name:"bishop",isWhite:e,xPos:r,yPos:n,game:i,standardMoves:function(){for(var t,e=[],h=0,f=[[1,1],[1,-1],[-1,1],[-1,-1]];h<f.length;h++)for(var d=(2,l(t=f[h])||u(t,2)||s(t,2)||a()),p=d[0],v=d[1],m=r+p,g=n+v;!(0,o.Nl)(m,g)&&(null===i.board[m][g]||c.canCapture(i.board[m][g])||"passant"===i.board[m][g].name)&&(e.push([m,g]),!c.canCapture(i.board[m][g])||"passant"===i.board[m][g].name);)m+=p,g+=v;return e}});return c}o=(i.then?(await i)():i)[0],n()}catch(f){n(f)}}))},533:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>a});var o=r(813),i=t([o]);function a(t){var e=t.isWhite,r=t.xPos,n=t.yPos,i=t.game,a=(0,o.Xw)({name:"king",isWhite:e,xPos:r,yPos:n,game:i,standardMoves:function(){for(var t=[],c=void 0!==i.whiteState&&s(e,i),u=e?i.whiteState:i.blackState,l=e?0:7,h=-1;h<=1;h++)for(var f=h+r,d=-1;d<=1;d++){var p=d+n;(0,o.Nl)(f,p)||(null===i.board[f][p]||a.canCapture(i.board[f][p]))&&t.push([f,p,function(){u.longCastle=!1,u.shortCastle=!1}])}return c&&(c.short&&null===i.board[l][1]&&null===i.board[l][2]&&t.push([l,1,function(){u.longCastle=!1,u.shortCastle=!1,i.board[l][0]=null,(0,o.ZP)("rook",e,l,2,i)}]),c.long&&null===i.board[l][4]&&null===i.board[l][5]&&null===i.board[l][6]&&t.push([l,5,function(){u.longCastle=!1,u.shortCastle=!1,i.board[l][7]=null,(0,o.ZP)("rook",e,l,4,i)}])),t}});return a.inCheck=function(){for(var t=0;t<8;t++)for(var e=0;e<8;e++)if(i.board[t][e]&&i.board[t][e].standardMoves().some((function(t){return t[0]===r&&t[1]===n})))return!0;return!1},a}function s(t,e){var r=t?e.whiteState:e.blackState,n=t?0:7;if(void 0===r||!r.shortCastle&&!r.longCastle)return!1;for(var i=[],a=(0,o.GM)(e.board),s=0;s<8;s++)for(var c=0;c<8;c++)if(e.board[s][c]&&(e.board[s][c].isWhite===!t&&a[s][c].standardMoves().map((function(t){return i.push(t)})),"king"===e.board[s][c].name&&e.board[s][c].isWhite===t&&a[s][c].inCheck()))return!1;var u=!1,l=!1;return r.shortCastle&&(i.some((function(t){return t[0]===n&&2===t[1]}))||i.some((function(t){return t[0]===n&&1===t[1]}))||(u=!0),e.board[n][0].isWhite===t&&"rook"===e.board[n][0].name||(r.shortCastle=!1,u=!1)),r.longCastle&&(i.some((function(t){return t[0]===n&&4===t[1]}))||i.some((function(t){return t[0]===n&&5===t[1]}))||(l=!0),e.board[n][7].isWhite===t&&"rook"===e.board[n][7].name||(r.longCastle=!1,l=!1)),{short:u,long:l}}o=(i.then?(await i)():i)[0],n()}catch(c){n(c)}}))},874:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>a});var o=r(813),i=t([o]);function a(t){var e=t.isWhite,r=t.xPos,n=t.yPos,i=t.game,a=(0,o.Xw)({name:"knight",isWhite:e,xPos:r,yPos:n,game:i,standardMoves:function(){var t=[];return[[2,1],[1,2],[-2,1],[-1,2],[2,-1],[1,-2],[-2,-1],[-1,-2]].forEach((function(e){var s=r+e[0],c=n+e[1];(0,o.Nl)(s,c)||null!==i.board[s][c]&&!a.canCapture(i.board[s][c])||t.push([s,c])})),t}});return a}o=(i.then?(await i)():i)[0],n()}catch(s){n(s)}}))},935:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>y});var o=r(784),i=r(720),a=r(925),s=r(601),c=r(425),u=r(42),l=r(491),h=r(738),f=r(813),d=t([f]);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new x(o||[]);return n(a,"_invoke",{value:k(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function d(){}function m(){}var g={};c(g,i,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==e&&r.call(b,i)&&(g=b);var w=m.prototype=f.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==p(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),c(w,s,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function m(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,s,"next",t)}function s(t){m(i,n,o,a,s,"throw",t)}a(void 0)}))}}function y(t){var e=t.isWhite,r=t.xPos,n=t.yPos,o=t.game,i=(0,f.Xw)({name:"pawn",isWhite:e,xPos:r,yPos:n,game:o,standardMoves:function(){for(var t=e?1:-1,a=e?1===r:6===r,s=[],c=function(){var c=r+t,l=n+u;if((0,f.Nl)(c,l))return"continue";if(0!==u&&i.canCapture(o.board[c][l])){if("passant"===o.board[c][l].name)return s.push([c,l,function(){o.board[c-t][l]=null}]),"continue";if(0===c||7===c)return s.push([c,l,g(v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(o,e);case 2:return r=t.sent,t.abrupt("return",new Promise((function(t){t(r)})));case 4:case"end":return t.stop()}}),t)})))]),"continue";s.push([c,l])}else if(0===u&&null==o.board[r+t][l]){if(a&&null==o.board[r+2*t][l]&&s.push([r+2*t,l,function(){(0,f.ZP)("passant",e,r+t,l,o)}]),0===c||7===c)return s.push([c,l,g(v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(o,e);case 2:return r=t.sent,t.abrupt("return",new Promise((function(t){t(r)})));case 4:case"end":return t.stop()}}),t)})))]),"continue";s.push([c,l])}},u=-1;u<=1;u++)c();return s}});return i}function b(t,e){return w.apply(this,arguments)}function w(){return(w=g(v().mark((function t(e,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n=e.div,f=document.createElement("div"),d=[[r?i:o,"queen"],[r?h:l,"knight"],[r?u:c,"bishop"],[r?s:a,"rook"]];f.classList.add("promotion"),d.forEach((function(e){var r=document.createElement("div"),o=document.createElement("img");o.src=e[0],r.appendChild(o),r.setAttribute("value",e[1]),r.addEventListener("click",(function(){var e=r.getAttribute("value");t(e),n.removeChild(f)})),f.appendChild(r)})),n.appendChild(f)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}f=(d.then?(await d)():d)[0],n()}catch(_){n(_)}}))},813:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{GM:()=>$,Nl:()=>K,Xw:()=>G,ZP:()=>V,e2:()=>Q,nL:()=>H});var o=r(600),i=r(74),a=r(173),s=r(982),c=r(533),u=r(695),l=r(354),h=r(874),f=r(781),d=r(935),p=r(312),v=r(539),m=r(784),g=r(720),y=r(925),b=r(601),w=r(425),_=r(42),S=r(491),k=r(738),E=r(692),L=r(965),C=t([i,a,c,u,l,h,f,d]);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return(e=N(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t){var e=O(t,"string");return"symbol"===P(e)?e:String(e)}function O(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t,e){if(t){if("string"==typeof t)return U(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(t,e):void 0}}function W(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function R(t){if(Array.isArray(t))return U(t)}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new L(o||[]);return n(a,"_invoke",{value:_(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var v={};c(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&r.call(g,i)&&(v=g);var y=p.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==P(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function F(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}[i,a,c,u,l,h,f,d]=C.then?(await C)():C;var x={pawn:E,king:p,queen:m,bishop:w,knight:S,rook:y},A={pawn:L,king:v,queen:g,bishop:_,knight:k,rook:b};function G(t){var e=t.name,r=t.isWhite,n=t.xPos,o=t.yPos,c=t.standardMoves,u=t.game;return{name:e,isWhite:r,xPos:n,yPos:o,standardMoves:c,game:u,svg:r?A[e]||!1:x[e]||!1,canCapture:function(t){return!!t&&r!==t.isWhite},move:function(t,l,h){var f,d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=p?c():c().filter((function(t){return B(n,o,t[0],t[1],r,u.board)}));if(p||u.whitesMove===r&&v.some((function(e){return e[0]===t&&e[1]===l}))){var m=v.findIndex((function(e){return e[0]===t&&e[1]===l}));u.history.push(Z(u)),u.lastMove=[(0,s.aZ)(n,o),(0,s.aZ)(t,l)],u.lastMoveSound=null===u.board[t][l]?"place":"capture",u.board[t][l]&&"pawn"!==e&&"passant"===u.board[t][l].name&&(u.lastMoveSound="place"),"pawn"===e||"capture"===u.lastMoveSound?u.fiftyMoveRule=0:u.fiftyMoveRule+=1;for(var g=0;g<8;g++){if(u.board[2][g]&&"passant"===u.board[2][g].name){u.board[2][g]=null;break}if(u.board[5][g]&&"passant"===u.board[5][g].name){u.board[5][g]=null;break}}if(h&&(e=h),V(e,r,t,l,u),u.board[n][o]=null,u.whitesMove=!u.whitesMove,v[m].length>2&&!h){var y=v[m][2]();if(y&&"Promise"===y[Symbol.toStringTag])return(f=D().mark((function e(){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y;case 2:return r=e.sent,(0,a.jG)(u,!1),u.board[n][o].move(t,l,r,!0),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var o=f.apply(t,e);function i(t){F(o,r,n,i,a,"next",t)}function a(t){F(o,r,n,i,a,"throw",t)}i(void 0)}))})()}return H(u)&&(u.lastMoveSound="check"),h&&(0,i.o3)(u),d&&u.socket&&(0,i.dm)(u,h,u.socket),!0}return!1},moves:function(){return u.fiftyMoveRule>100||u.whitesMove!==r?[]:c().filter((function(t){return B(n,o,t[0],t[1],r,u.board)}))}}}function K(t,e){return t<0||e<0||t>=8||e>=8}function B(t,e,r,n,o,i){var a,s=$(i),c=s[t][e];V(c.name,c.isWhite,r,n,{board:s}),s[t][e]=null;for(var u=[],l=0;l<8;l++)for(var h=0;h<8;h++)if(s[l][h]){var f=s[l][h].isWhite;"king"==s[l][h].name&&f==o&&(a=[l,h]),f!==o&&s[l][h].standardMoves().map((function(t){return u.push(t)}))}return!a||!u.some((function(t){return t[0]===a[0]&&t[1]===a[1]}))}function $(t){for(var e,r=(e=Array(8),R(e)||W(e)||j(e)||I()).map((function(t){return Array(8).fill(null)})),n=0;n<8;n++)for(var o=0;o<8;o++)t[n][o]&&V(t[n][o].name,t[n][o].isWhite,n,o,{board:r});return r}function Z(t){return{board:$(t.board),div:t.div,whitesMove:t.whitesMove,showingWhiteSide:t.showingWhiteSide,lastMove:t.lastMove,lastMoveSound:t.lastMoveSound,drawnArrows:[],userHighlights:[],fiftyMoveRule:t.fiftyMoveRule,whiteState:{shortCastle:t.whiteState.shortCastle,longCastle:t.whiteState.longCastle},blackState:{shortCastle:t.blackState.shortCastle,longCastle:t.blackState.longCastle}}}function H(t){var e=!1;return t.board.forEach((function(r,n){r.forEach((function(r,o){t.board[n][o]&&"king"===t.board[n][o].name&&t.board[n][o].inCheck()&&(e=(0,s.aZ)(n,o))}))})),e}function Q(t){if(t.fiftyMoveRule>100)return{result:"Stalemate",reason:"Fifty move rule"};try{var e=new o.qQ((0,i.$n)(t));if(e.isCheckmate())return{result:t.whitesMove?"Black":"White",reason:"Checkmate"};if(e.isStalemate())return{result:"Stalemate",reason:"No more moves"};if(e.isInsufficientMaterial())return{result:"Stalemate",reason:"Insufficient material"}}catch(e){console.log((0,i.$n)(t)),console.log(e);var r=Y(t);if(r)return r}return!1}function Y(t){for(var e=0;e<8;e++)for(var r=0;r<8;r++)if(t.board[e][r]&&t.board[e][r].isWhite===t.whitesMove&&t.board[e][r].moves().length>0)return!1;return H(t)?{result:t.whitesMove?"Black":"White",reason:"Checkmate"}:{result:"Stalemate",reason:"No more moves"}}function V(t,e,r,n,o){var i,a={},s={isWhite:e,xPos:r,yPos:n,game:o};switch(t){case"pawn":a=(0,d.Z)(s);break;case"king":a=(0,c.Z)(s);break;case"knight":a=(0,h.Z)(s);break;case"rook":a=(0,l.Z)(s);break;case"bishop":a=(0,f.Z)(s);break;case"queen":a=(0,u.Z)(s);break;default:a={standardMoves:function(){return[]}}}var p=G((T(i={name:t,isWhite:e,xPos:r,yPos:n},"yPos",n),T(i,"standardMoves",a.standardMoves),T(i,"game",o),i));return o.board[r][n]=M(M({},p),a),o.board[r][n]}n()}catch(X){n(X)}}))},695:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>c});var o=r(354),i=r(781),a=r(813),s=t([o,i,a]);function c(t){var e=t.isWhite,r=t.xPos,n=t.yPos,s=t.game;return(0,a.Xw)({name:"queen",isWhite:e,xPos:r,yPos:n,game:s,standardMoves:function(){var t=(0,i.Z)({isWhite:e,xPos:r,yPos:n,game:s}),a=(0,o.Z)({isWhite:e,xPos:r,yPos:n,game:s});return t.standardMoves().concat(a.standardMoves())}})}[o,i,a]=s.then?(await s)():s,n()}catch(u){n(u)}}))},354:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>h});var o=r(813),i=t([o]);function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function l(t){if(Array.isArray(t))return t}function h(t){var e=t.isWhite,r=t.xPos,n=t.yPos,i=t.game,c=(0,o.Xw)({name:"rook",isWhite:e,xPos:r,yPos:n,game:i,standardMoves:function(){for(var t,e=[],h=0,f=[[1,0],[-1,0],[0,1],[0,-1]];h<f.length;h++)for(var d=(2,l(t=f[h])||u(t,2)||s(t,2)||a()),p=d[0],v=d[1],m=r+p,g=n+v;!(0,o.Nl)(m,g)&&(null===i.board[m][g]||c.canCapture(i.board[m][g])||"passant"===i.board[m][g].name)&&(e.push([m,g,function(){0===r&&0===n&&(i.whiteState.shortCastle=!1),0===r&&7===n&&(i.whiteState.longCastle=!1),7===r&&0===n&&(i.blackState.shortCastle=!1),7===r&&7===n&&(i.blackState.longCastle=!1)}]),!c.canCapture(i.board[m][g])||"passant"===i.board[m][g].name);)m+=p,g+=v;return e}});return c}o=(i.then?(await i)():i)[0],n()}catch(f){n(f)}}))},65:(t,e,r)=>{function n(t,e,r,n,i){var a={timerStarted:(new Date).getTime(),timeLeft:1e3*t,length:1e3*t,increment:1e3*e,isRunning:!1,updateFunction:r,timerFinishedFunction:n,linkedTimer:i,start:function(){a.isRunning||(a.timerStarted=(new Date).getTime(),a.length=a.timeLeft,a.isRunning=!0,o(a),setInterval((function t(){o(a,t)}),100))},alternate:function(){a.linkedTimer&&a.linkedTimer.start&&a.linkedTimer.pause&&(a.linkedTimer.isRunning?(a.linkedTimer.pause(),a.start()):(a.linkedTimer.start(),a.pause()))},pause:function(){a.isRunning&&(a.length+=a.increment,o(a),a.isRunning=!1,r&&r(a.timeLeft))}};return a}function o(t,e){if(t.isRunning){var r=(new Date).getTime();t.timeLeft=t.length-(r-t.timerStarted),t.updateFunction&&t.updateFunction(t.timeLeft),t.timeLeft<=0&&(t.timerFinishedFunction&&t.timerFinishedFunction(),t.updateFunction&&t.updateFunction(0),t.timeLeft=0,t.isRunning=!1)}else clearInterval(e)}r.d(e,{Z:()=>n})},6:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{es:()=>R,iX:()=>U,l9:()=>I}),r(30);var o=r(74),i=r(511),a=r(173),s=r(982),c=r(569),u=t([o,i,a,c]);function b(t){return k(t)||S(t)||_(t)||w()}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){if(t){if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}function S(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function k(t){if(Array.isArray(t))return E(t)}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}if([o,i,a,c]=u.then?(await u)():u,document.body.dataset.id){var l=document.querySelector("#game"),h=new URLSearchParams(window.location.search).get("black");window.history.replaceState({},document.title,"/game/"+document.body.dataset.id);var f,d=await fetch("/api/game/".concat(document.body.dataset.id)),p=await d.json();if(p.live)f=await(0,i.Np)(document.body.dataset.id,l,M),(0,i.w$)(f,h).then((function(t){R(t),U(f)})).catch((function(t){R(t),U(f)}));else{f=(0,o.wn)([p.game.fen,b(p.game.uci.split(" "))]);var v=document.querySelector("#user-dropdown > span"),m=!!v&&v.textContent;f.id=p.id,f.whiteUserSpan.textContent=p.game.whitePlayer,f.blackUserSpan.textContent=p.game.blackPlayer,f.result={result:p.game.winner,reason:p.game.reason.toLowerCase()},f.timeSpent=p.game.timed_uci.split(" "),f.timeControl=p.game.time_control,"white"===p.game.winner.toLowerCase()&&(f.result.result=p.game.whitePlayer),"black"===p.game.winner.toLowerCase()&&(f.result.result=p.game.blackPlayer),p.game.blackPlayer===m&&(0,a.VB)(f),l.innerHTML="",l.appendChild(f.div),U(f)}L(f);var g=document.querySelector("#whiteInfo"),y=document.querySelector("#blackInfo");g.prepend(f.whiteUserSpan),y.prepend(f.blackUserSpan),N(f,document.querySelector("ol")),p.live||x(f)}function L(t){document.addEventListener("keydown",(function(e){"ArrowLeft"===e.code&&A(t),"ArrowRight"===e.code&&P(t),"ArrowUp"===e.code&&(e.preventDefault(),x(t)),"ArrowDown"===e.code&&(e.preventDefault(),C(t)),"KeyF"===e.code&&(0,a.VB)(t)})),document.querySelector("#end").addEventListener("click",(function(){return C(t)})),document.querySelector("#start").addEventListener("click",(function(){return x(t)})),document.querySelector("#back").addEventListener("click",(function(){return A(t)})),document.querySelector("#forward").addEventListener("click",(function(){return P(t)})),document.querySelector("#flip").addEventListener("click",(function(){return(0,a.VB)(t)}));var e=document.querySelector("#game");e&&e.addEventListener("wheel",(function(e){e.preventDefault(),e.deltaY>0?P(t):A(t)}))}function C(t){(0,a.d7)(t);var e=document.querySelectorAll("ol > li > span");e.forEach((function(t){t.classList.remove("active")})),""!==e[e.length-1].innerHTML?e[e.length-1].classList.add("active"):e[e.length-2].classList.add("active");var r=window.scrollY;document.querySelector("ol").scrollTo({top:document.querySelector("ol").scrollHeight,behavior:"smooth"}),window.scrollTo(0,r),W(t,t.history.length)}function x(t){(0,a.Pf)(t),document.querySelectorAll("ol > li > span").forEach((function(t){t.classList.remove("active")}));var e=window.scrollY;document.querySelector("ol").scrollTo({top:0,behavior:"smooth"}),window.scrollTo(0,e),W(t,0)}function A(t){j(t,t.history.length-t.timeline-1-1)}function P(t){j(t,t.history.length-t.timeline-1+1)}function q(t,e,r){var n=e?t.whiteClock:t.blackClock;return T(n.timeLeft,r),n.updateFunction=function(t){return T(t,r)},n}function M(t){q(t,!0,document.querySelector("#whiteTimer")),q(t,!1,document.querySelector("#blackTimer"))}function T(t,e){var r=Math.floor(t/6e4),n=Math.floor((t-6e4*r)/1e3),o=Math.floor((t-6e4*r-1e3*n)/100),i=n<10?"0":"";e.innerText="".concat(r,":").concat(i).concat(n,".").concat(o)}function N(t,e){e.innerHTML="";var r=t.history.slice(1);r.push(t),r.forEach((function(r,n){var o=t.history[n].board,i=(0,s.O$)(r,o);O(t,e,i,n)}));var n=window.scrollY;e.scrollTo({top:e.scrollHeight}),window.scrollTo(0,n)}function O(t,e,r,n){var o=e.querySelectorAll("li");if((o=0!==o.length?o[o.length-1]:null)&&""===o.querySelector("span:last-child").innerText){var i=o.querySelector("span:last-child");i.addEventListener("click",(function(){return j(t,n)})),i.setAttribute("history-index",n),i.innerText=r}else{o=document.createElement("li");var a=document.createElement("span");a.addEventListener("click",(function(){return j(t,n)}));var s=document.createElement("span");s.addEventListener("click",(function(){return j(t,n)})),s.setAttribute("history-index",n);var c=Math.floor(n/2)+1;a.innerText="".concat(c,"."),s.innerText=r;var u=document.createElement("span");o.appendChild(a),o.appendChild(s),o.appendChild(u),e.appendChild(o)}j(t,n,!1)}function I(t,e){var r=t.history[t.history.length-1].board;O(t,e,(0,s.O$)(t,r),t.history.length-1)}function j(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.timeline;t.timeline=t.history.length-(e+1),t.timeline<=0&&(t.timeline=0,e=t.history.length-1),t.timeline>=t.history.length&&(t.timeline=t.history.length,e-=1),(0,c.P2)(t,n,r),document.querySelectorAll("ol > li > span").forEach((function(t){t.classList.remove("active")}));var o,i,a=document.querySelector('[history-index="'.concat(e,'"]')),s=window.scrollY;a&&(a.classList.add("active"),o=document.querySelector("ol"),i=a.parentElement.offsetTop,o.scrollTo({top:i-o.offsetTop,behavior:"smooth"})),window.scrollTo(0,s),W(t,e+1)}function W(t,e){if(t.timeSpent){for(var r=t.history[0].whitesMove,n=1e3*t.timeControl.split("+")[0],o=1e3*t.timeControl.split("+")[1],i=document.querySelector("#whiteTimer"),a=document.querySelector("#blackTimer"),s=n,c=n,u=0;u<e;u++)r&&u%2==0?(s-=t.timeSpent[u],s+=o):(c-=t.timeSpent[u],c+=o);T(s,i),T(c,a)}}function R(t){var e=document.querySelector("#toast");e&&(t.result?"Stalemate"===t.result||"draw"===t.result.toLowerCase()?e.innerHTML="Game ended in a draw due to ".concat(t.reason.toLowerCase(),"."):e.innerHTML="".concat(t.result," has won due to ").concat(t.reason.toLowerCase()):e.innerHTML=t)}function U(t){var e=document.querySelector("#user-dropdown > span").textContent,r=t.whiteUserSpan.textContent,n=t.blackUserSpan.textContent;document.title=e!==r&&e!==n?"".concat(n," vs. ").concat(r," - NK Chess"):"".concat(e===r?n:r," vs. ").concat(e," - NK Chess")}n()}catch(D){n(D)}}),1)},511:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Np:()=>v,w$:()=>b});var o=r(74),i=r(173),a=r(6),s=r(65),c=t([o,i,a]);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function h(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new x(o||[]);return n(a,"_invoke",{value:k(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var d={};function p(){}function v(){}function m(){}var g={};c(g,i,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==e&&r.call(b,i)&&(g=b);var w=m.prototype=p.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function o(n,i,a,s){var c=f(t[n],t,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},_(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),c(w,s,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function h(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,s,"next",t)}function s(t){h(i,n,o,a,s,"throw",t)}a(void 0)}))}}function d(t,e){return p.apply(this,arguments)}function p(){return(p=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var c=new WebSocket("ws://localhost:8080");c.onopen=function(){c.send(JSON.stringify({id:e}))},c.addEventListener("message",(function e(n){var u=JSON.parse(n.data);if(u.exportedGame){var l,h,f=(0,o.wn)(u.exportedGame);f.id=u.id,f.socket=c,f&&f.div&&(c.addEventListener("message",(function(t){var e=JSON.parse(t.data);if(e.uci){var n=f.lastMove?f.lastMove[0]+f.lastMove[1]:"";if(e.invalid&&e.uci.slice(0,4)===n)return(0,a.es)("Server rejected move. Try refreshing?"),void(0,i.jG)(f);e.uci.slice(0,4)===n||e.invalid||((0,o.hR)(f,e.uci,!0),f.timer&&f.timer.alternate())}e.result&&(f.result={result:e.result,reason:e.reason},l&&h&&(l.pause(),h.pause()),(0,a.es)(f.result),(0,i.By)(f,!0)),e.whiteUser&&(f.whiteUserSpan.textContent=e.whiteUser,(0,a.iX)(f)),e.blackUser&&(f.blackUserSpan.textContent=e.blackUser,(0,a.iX)(f)),e.whiteClock&&e.blackClock&&(l=(0,s.Z)(e.whiteClock,e.increment),h=(0,s.Z)(e.blackClock,e.increment),f.whiteClock=l,f.blackClock=h,r&&r(f),e.activeClock&&("white"===e.activeClock?l.start():h.start())),e.startClock&&("white"===e.startClock?l.start():h.start()),e.stopClock&&("white"===e.stopClock?l.pause():h.pause()),e.update&&(e.update.whiteClock&&l&&(l.length=e.update.whiteClock.length,l.timerStarted=e.update.whiteClock.timerStarted),e.update.blackClockUpdate&&h&&(h.length=e.update.blackClockUpdate.length,h.timerStarted=e.update.blackClockUpdate.timerStarted))})),c.removeEventListener("message",e),t(f))}})),c.onerror=function(t){n(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,e,r){return m.apply(this,arguments)}function m(){return(m=f(l().mark((function t(e,r,n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,o){d("".concat(e),n).then((function(e){r&&(r.innerHTML="",r.appendChild(e.div)),t(e)})).catch((function(t){o(t)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e){return y.apply(this,arguments)}function y(){return(y=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.socket.send(JSON.stringify({token:localStorage.getItem("token"),id:e.id,joinAsBlack:r})),e.socket.addEventListener("message",(function r(o){setTimeout((function(){n("Could not join game"),e.socket.removeEventListener("message",r)}),5e3);var i=JSON.parse(o.data);void 0!==i.isWhite&&(t(i.isWhite),e.socket.removeEventListener("message",r))}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e){return new Promise(function(){var r=f(l().mark((function r(n,o){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:new Promise((function(t,e){var r;localStorage.getItem("token")&&(r=localStorage.getItem("token")),fetch("/token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}}).then(function(){var t=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.status,t.next=3,e.json();case 3:return(e=t.sent).statusCode=r,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(e){401!==e.statusCode?(localStorage.setItem("token",e.token),t(e.token)):t("You are spectating. Log in to play.")})).catch((function(t){e(t)}))})).then((function(){g(t,e).then((function(e){t.playerIsWhite=e;var r="You are "+(null==e?"spectating":"playing as ".concat(e?"white":"black"));!1===e&&(0,i.VB)(t),n(r)})).catch((function(t){o(t)}))})).catch((function(t){o(t)}));case 1:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}())}[o,i,a]=c.then?(await c)():c,n()}catch(w){n(w)}}))},72:(t,e,r)=>{r.a(t,(async(t,e)=>{try{var n=r(398),o=r(74),i=r(173),a=t([o,i]);[o,i]=a.then?(await a)():a,c(document.querySelector("#next-section > div > #board-container-parent"),1e3),u(document.querySelectorAll("section #board-container-parent")[1]);var s=document.querySelector("a#next");function c(t,e){t.innerHTML="";var r=(0,o.dz)(!1,!0);(0,i.By)(r,!0),(0,o.zM)(r,["d2d4","g8f6","c2c4","e7e6","b1c3","f8b4","g1f3","e8g8","c1g5","c7c5","e2e3","c5d4","d1d4","b8c6","d4d3","h7h6","g5h4","d7d5","a1d1","g7g5","h4g3","f6e4","f3d2","e4c5","d3c2","d5d4","d2f3","e6e5","f3e5","d4c3","d1d8","c3b2","e1e2","f8d8","c2b2","c5a4","b2c2","a4c3","e2f3","d8d4","h2h3","h6h5","g3h2","g5g4","f3g3","d4d2","c2b3","c3e4","g3h4","b4e7","h4h5","g8g7","h2f4","c8f5","f4h6","g7h7","b3b7","d2f2","h6g5","a8h8","e5f7","f5g6","h5g4","c6e5","g4h4","h7g8","f7h8","e7g5"],!1,e).then((function(){c(t,e)})),t.appendChild(r.div)}function u(t){var e=(0,o.dz)(!1,!0);t.append(e.div),(0,i.VB)(e),l(e,"d2d4"),l(e,"e7e5"),l(e,"d4e5"),l(e,"b8c6"),l(e,"g1f3"),l(e,"d8e7",[["e7","e5"],["c6","e5"]],["e5"]),l(e,"c1f4",[["f4","e5"],["f3","e5"],["e7","e5"],["c6","e5"]],["e5"]),l(e,"e7b4",[["b4","e1"],["b4","f4"],["b4","b2"]],["f4","b2"]),l(e,"f4d2",[["b4","b2"],["d2","b4"]],["b4","b2"]),l(e,"b4b2",[["b2","a1"]],["a1"]),l(e,"d2c3",[["c3","a1"],["b1","c3"]],["b2"]),l(e,"f8b4",[["b4","e1"]],["e1"]),l(e,"d1d2",[["c3","a1"]]),l(e,"b4c3",[["c3","e1"]],["e1"]),l(e,"d2c3",[["b2","c1"]]),l(e,"b2c1",[["c1","e1"]],["d1","d2"]),h(e)}function l(t,e,r,i){(0,o.hR)(t,e,!1,!0,!1),history.length>1&&(t.history[t.history.length-1].drawnArrows=t.drawnArrows,t.history[t.history.length-1].userHighlights=t.userHighlights),t.drawnArrows=[],t.userHighlights=[],r&&r.forEach((function(e){t.drawnArrows.push([e[0],e[1]])})),i&&i.forEach((function(e){t.userHighlights.push(e)})),(0,n.BK)(t,t.div.parentNode.querySelector("svg"))}function h(t){document.addEventListener("keydown",(function(e){"ArrowLeft"===e.code&&(0,i.w_)(t),"ArrowRight"===e.code&&(0,i.ck)(t),"ArrowUp"===e.code&&(0,i.Pf)(t),"ArrowDown"===e.code&&(0,i.d7)(t),"KeyF"===e.code&&(0,i.VB)(t)})),document.querySelector("#end").addEventListener("click",(function(){return(0,i.d7)(t)})),document.querySelector("#start").addEventListener("click",(function(){return(0,i.Pf)(t)})),document.querySelector("#back").addEventListener("click",(function(){return(0,i.w_)(t)})),document.querySelector("#forward").addEventListener("click",(function(){return(0,i.ck)(t)})),document.querySelector("#flip").addEventListener("click",(function(){return(0,i.VB)(t)}))}s.addEventListener("click",(function(t){t.preventDefault(),document.querySelector("#next-section").scrollIntoView({behavior:"smooth"})})),window.addEventListener("scroll",(function(){window.scrollY>=30?s.classList.add("hidden"):s.classList.remove("hidden")})),e()}catch(f){e(f)}}))},425:(t,e,r)=>{t.exports=r.p+"assets/images/e196dd569ecbcb92d569.svg"},312:(t,e,r)=>{t.exports=r.p+"assets/images/c83f5581968cfa1416d4.svg"},491:(t,e,r)=>{t.exports=r.p+"assets/images/2806967ff884b67af8fc.svg"},692:(t,e,r)=>{t.exports=r.p+"assets/images/0bac57fcee185c845528.svg"},784:(t,e,r)=>{t.exports=r.p+"assets/images/e475a365a63ab9c3b484.svg"},925:(t,e,r)=>{t.exports=r.p+"assets/images/48665a8ce082e5f12710.svg"},30:(t,e,r)=>{t.exports=r.p+"assets/images/442b87d656904e4eba23.svg"},42:(t,e,r)=>{t.exports=r.p+"assets/images/b2002308f81e96903120.svg"},539:(t,e,r)=>{t.exports=r.p+"assets/images/ae4879833ee0111ba3b2.svg"},738:(t,e,r)=>{t.exports=r.p+"assets/images/dc9544a72b2cf7a92579.svg"},965:(t,e,r)=>{t.exports=r.p+"assets/images/2062ce2d4d0e8d018369.svg"},720:(t,e,r)=>{t.exports=r.p+"assets/images/30871ebbc0ad7f46a1c7.svg"},601:(t,e,r)=>{t.exports=r.p+"assets/images/c051a30b157b9deadd0d.svg"},512:(t,e,r)=>{t.exports=r.p+"assets/sounds/4c0d6b27175ec63ec634.ogg"},315:(t,e,r)=>{t.exports=r.p+"assets/sounds/08e1bc366728c6a042c1.wav"},643:(t,e,r)=>{t.exports=r.p+"assets/sounds/5a58dd80a641cfdf5fb0.ogg"}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return o[t](r,r.exports,a),r.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(o,i,a)=>{var s;a&&((s=[]).d=-1);var c,u,l,h=new Set,f=o.exports,d=new Promise(((t,e)=>{l=e,u=t}));d[e]=f,d[t]=t=>(s&&t(s),h.forEach(t),d.catch((t=>{}))),o.exports=d,i((o=>{var i;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var i=[];i.d=0,o.then((t=>{a[e]=t,n(i)}),(t=>{a[r]=t,n(i)}));var a={};return a[t]=t=>t(i),a}}var s={};return s[t]=t=>{},s[e]=o,s})))(o);var a=()=>c.map((t=>{if(t[r])throw t[r];return t[e]})),u=new Promise((e=>{(i=()=>e(a)).r=0;var r=t=>t!==s&&!h.has(t)&&(h.add(t),t&&!t.d&&(i.r++,t.push(i)));c.map((e=>e[t](r)))}));return i.r?u:a()}),(t=>(t?l(d[r]=t):u(f),n(s)))),s&&s.d<0&&(s.d=0)},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!t;)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t+"../../"})(),a(72)})();